<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/feed"></ion-back-button>
    </ion-buttons>
    <ion-title color="light">Amigos y Solicitudes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div class="ion-padding" *ngIf="isLoading">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
  </div>
  
  <ion-list-header color="medium">
    <ion-label>Usuarios para Añadir</ion-label>
  </ion-list-header>

  <ion-list *ngIf="!isLoading && availableUsers.length > 0">
    <ion-item *ngFor="let user of availableUsers">
        <ion-avatar slot="start">
            <img [src]="user.avatar_url || 'assets/default-avatar.png'" />
        </ion-avatar>
        <ion-label>
            <h3>{{ user.name }}</h3>
        </ion-label>
        
        <ion-button 
            slot="end" 
            color="secondary" 
            (click)="sendFriendRequest(user.id)"
            *ngIf="user.status === 'available'"
        >
            Añadir Amigo
        </ion-button>
        <ion-note slot="end" *ngIf="user.status === 'pending'">Pendiente</ion-note>
        
    </ion-item>
  </ion-list>
  
  <p class="ion-text-center ion-padding" *ngIf="!isLoading && availableUsers.length === 0">
      No hay usuarios para sugerir.
  </p>

  </ion-content>